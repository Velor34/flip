!function(t){var e=t.createClass({displayName:"Flip",rotate3d:function(t){var e=document.getElementById("game-board"),i,s,a,n;"x"===t?(i=this.state.flipX?"0":"180deg",s=this.state.flipY?"180deg":"0"):(i=this.state.flipX?"180deg":"0",s=this.state.flipY?"0":"180deg"),(this.state.flipX?!this.state.flipY:this.state.flipY)?(a="#dcdeea",n="#24283d"):(a="#24283d",n="#dcdeea"),e.style.transform="rotateX("+i+") rotateY("+s+")",e.style.webkitTransform="rotateX("+i+") rotateY("+s+")",e.style.background=a,e.style.borderColor=n,e.style.color=n},flip:function(t){var e=document.getElementById("player"),i=this.state.playerPosition,s="x"===t?this.state.height:this.state.width,a="x"===t?"y":"x",n="x"===t,r="y"===t;e.classList.toggle("flip"),i[a]=s-i[a]-1,this.rotate3d(t),this.setState({playerPosition:i,flipX:n?!this.state.flipX:this.state.flipX,flipY:r?!this.state.flipY:this.state.flipY}),setTimeout(function(){this.setState({win:this.checkBoard(i)})}.bind(this),400)},move:function(t){var e=this.state.playerPosition,i=this.state.flipX?-1:1,s=this.state.flipY?-1:1,a=e.x+t.x*s,n=e.y+t.y*i;if(!(0>a||a>this.state.width-1||0>n||n>this.state.height-1)){var r=document.getElementById("player"),o=this.state.flipX?this.state.height-n-1:n,l=this.state.flipY?this.state.width-a-1:a,h="translate3d("+25*l+"px,"+25*o+"px,0)";r.style.transform=h,r.style.webkitTransform=h,e.x=a,e.y=n,this.setState({playerPosition:e,win:this.checkBoard(e)})}},checkBoard:function(t){var e=this.state.goalPosition;return(this.state.flipX?!this.state.flipY:this.state.flipY)||t.x!==e.x||t.y!==e.y?!1:!0},getOffset:function(){var t=document.getElementById("game-board"),e={top:parseInt(window.getComputedStyle(t).borderBottomWidth,10),left:parseInt(window.getComputedStyle(t).borderLeftWidth,10)};return{top:t.offsetTop+e.top,left:t.offsetLeft+e.left}},getDimensions:function(){return{width:25*this.state.width+"px",height:25*this.state.height+"px"}},blankBoard:function(t,e){function i(){return""}for(var s=[],a,n=0;e>n;n++){var r=Array.apply(null,new Array(t));r=r.map(i),s.push(r)}var a={x:s[0].length-1,y:s.length-1};return s[a.y][a.x]=String.fromCharCode(9634),{board:s,height:e,width:t,playerPosition:{x:0,y:0},goalPosition:a}},restartGame:function(){var t=document.getElementById("game-board"),e=document.getElementById("player"),i=this.getDimensions(),s=this.getOffset();e.style.transform="",e.style.webkitTransform="",document.getElementById("game-board").removeAttribute("style"),t.style.width=i.width,t.style.height=i.height,this.setState(this.getInitialState(s))},handleKeyPress:function(t){var e=t.keyCode;this.state.win||(32===e?this.flip("x"):13===e?this.flip("y"):37===e?this.move({x:-1,y:0}):38===e?this.move({x:0,y:-1}):39===e?this.move({x:1,y:0}):40===e&&this.move({x:0,y:1}))},componentDidMount:function(){window.addEventListener("keydown",this.handleKeyPress),this.restartGame()},getInitialState:function(t){var e=this.blankBoard(10,10);return t=t||{top:0,left:0},{height:e.height,width:e.width,offset:{top:t.top,left:t.left},tiles:e.board,playerPosition:e.playerPosition,goalPosition:e.goalPosition,flipX:!1,flipY:!1,win:!1}},render:function(){var e=this.state.tiles.reduce(function(t,e){return t.concat(e)});return t.DOM.div(null,t.DOM.div({id:"game-board",onKeyPress:this.handleKeyPress,style:this.getDimensions()},e.map(function(t,e){return i({status:t,key:e})},this)),s({boardOffset:this.state.offset,status:String.fromCharCode(9711)}),a({winClass:this.state.win?"button win":"button",status:this.state.win?"You win!":"Get to the exit.",restart:this.restartGame}))}}),i=t.createClass({displayName:"Tile",render:function(){return t.DOM.div({className:"tile"},this.props.status)}}),s=t.createClass({displayName:"Player",render:function(){return t.DOM.div({className:"tile",id:"player",style:this.props.boardOffset},this.props.status)}}),a=t.createClass({displayName:"Menu",clickHandler:function(){this.props.restart()},render:function(){return t.DOM.div({id:"menu"},t.DOM.h3({id:"subtitle"},this.props.status),t.DOM.a({className:this.props.winClass,onClick:this.clickHandler},"Restart"))}});t.renderComponent(e(null),document.getElementById("game-container"))}(React);